<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1206px" preserveAspectRatio="none" style="width:1377px;height:1206px;background:#FFFFFF;" version="1.1" viewBox="0 0 1377 1206" width="1377px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="1099.4531" style="stroke:#181818;stroke-width:1.0;" width="10" x="35.5" y="46.2969"/><rect fill="#FFFFFF" height="505.125" style="stroke:#181818;stroke-width:1.0;" width="10" x="263.5" y="91.5625"/><rect fill="#FFFFFF" height="505.125" style="stroke:#181818;stroke-width:1.0;" width="10" x="263.5" y="640.625"/><rect fill="#FFFFFF" height="404.7266" style="stroke:#181818;stroke-width:1.0;" width="10" x="531.5" y="162.8281"/><rect fill="#FFFFFF" height="404.7266" style="stroke:#181818;stroke-width:1.0;" width="10" x="531.5" y="711.8906"/><rect fill="#FFFFFF" height="262.1953" style="stroke:#181818;stroke-width:1.0;" width="10" x="911.5" y="276.2266"/><rect fill="#FFFFFF" height="262.1953" style="stroke:#181818;stroke-width:1.0;" width="10" x="911.5" y="825.2891"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1049.5" y="305.3594"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1122" y="854.4219"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1204" y="421.8906"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1204" y="970.9531"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1305.5" y="363.625"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1305.5" y="480.1563"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1305.5" y="912.6875"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1305.5" y="1029.2188"/><rect fill="none" height="1100.4531" style="stroke:#000000;stroke-width:1.5;" width="1360" x="10" y="53.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="40" x2="40" y1="36.2969" y2="1170.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="268" x2="268" y1="36.2969" y2="1170.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="536.5" x2="536.5" y1="36.2969" y2="1170.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="916" x2="916" y1="36.2969" y2="1170.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1054" x2="1054" y1="36.2969" y2="1170.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1127" x2="1127" y1="36.2969" y2="1170.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1209" x2="1209" y1="36.2969" y2="1170.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1310" x2="1310" y1="36.2969" y2="1170.75"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="27" y="24.9951">SPA</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41" x="20" y="1169.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="27" y="1189.7451">SPA</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="234" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="241" y="24.9951">MPT API</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="234" y="1169.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="241" y="1189.7451">MPT API</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="479.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="486.5" y="24.9951">TaskController</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="479.5" y="1169.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="486.5" y="1189.7451">TaskController</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="868" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="875" y="24.9951">TaskService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="868" y="1169.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="875" y="1189.7451">TaskService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="1022" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="1029" y="24.9951">MGI API</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="1022" y="1169.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="1029" y="1189.7451">MGI API</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60" x="1097" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="1104" y="24.9951">MP API</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60" x="1097" y="1169.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="1104" y="1189.7451">MP API</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="1167" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="1174" y="24.9951">TaskRepo</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="1167" y="1169.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="1174" y="1189.7451">TaskRepo</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="1261" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="1268" y="24.9951">TaskMapper</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="1261" y="1169.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="1268" y="1189.7451">TaskMapper</text><rect fill="#FFFFFF" height="1099.4531" style="stroke:#181818;stroke-width:1.0;" width="10" x="35.5" y="46.2969"/><rect fill="#FFFFFF" height="505.125" style="stroke:#181818;stroke-width:1.0;" width="10" x="263.5" y="91.5625"/><rect fill="#FFFFFF" height="505.125" style="stroke:#181818;stroke-width:1.0;" width="10" x="263.5" y="640.625"/><rect fill="#FFFFFF" height="404.7266" style="stroke:#181818;stroke-width:1.0;" width="10" x="531.5" y="162.8281"/><rect fill="#FFFFFF" height="404.7266" style="stroke:#181818;stroke-width:1.0;" width="10" x="531.5" y="711.8906"/><rect fill="#FFFFFF" height="262.1953" style="stroke:#181818;stroke-width:1.0;" width="10" x="911.5" y="276.2266"/><rect fill="#FFFFFF" height="262.1953" style="stroke:#181818;stroke-width:1.0;" width="10" x="911.5" y="825.2891"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1049.5" y="305.3594"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1122" y="854.4219"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1204" y="421.8906"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1204" y="970.9531"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1305.5" y="363.625"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1305.5" y="480.1563"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1305.5" y="912.6875"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1305.5" y="1029.2188"/><path d="M10,53.2969 L74,53.2969 L74,60.4297 L64,70.4297 L10,70.4297 L10,53.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1100.4531" style="stroke:#000000;stroke-width:1.5;" width="1360" x="10" y="53.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="66.3638">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="88" x="89" y="65.5073">[surveillance]</text><polygon fill="#181818" points="251.5,87.5625,261.5,91.5625,251.5,95.5625,255.5,91.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="45.5" x2="257.5" y1="91.5625" y2="91.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="52.5" y="86.4966">POST(/api/tasks/surveillance)</text><line style="stroke:#181818;stroke-width:1.0;" x1="273.5" x2="315.5" y1="120.6953" y2="120.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="315.5" x2="315.5" y1="120.6953" y2="133.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="274.5" x2="315.5" y1="133.6953" y2="133.6953"/><polygon fill="#181818" points="284.5,129.6953,274.5,133.6953,284.5,137.6953,280.5,133.6953" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="280.5" y="115.6294">auth middleware</text><polygon fill="#181818" points="519.5,158.8281,529.5,162.8281,519.5,166.8281,523.5,162.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="273.5" x2="525.5" y1="162.8281" y2="162.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="280.5" y="157.7622">CreateSurveillanceTaskAsync(task)</text><line style="stroke:#181818;stroke-width:1.0;" x1="541.5" x2="583.5" y1="191.9609" y2="191.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="583.5" x2="583.5" y1="191.9609" y2="204.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="542.5" x2="583.5" y1="204.9609" y2="204.9609"/><polygon fill="#181818" points="552.5,200.9609,542.5,204.9609,552.5,208.9609,548.5,204.9609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="548.5" y="186.895">permissions middleware</text><line style="stroke:#181818;stroke-width:1.0;" x1="541.5" x2="583.5" y1="234.0938" y2="234.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="583.5" x2="583.5" y1="234.0938" y2="247.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="542.5" x2="583.5" y1="247.0938" y2="247.0938"/><polygon fill="#181818" points="552.5,243.0938,542.5,247.0938,552.5,251.0938,548.5,247.0938" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="548.5" y="229.0278">get current user</text><polygon fill="#181818" points="899.5,272.2266,909.5,276.2266,899.5,280.2266,903.5,276.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="541.5" x2="905.5" y1="276.2266" y2="276.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="351" x="548.5" y="271.1606">AddSurveillanceTaskAsync(task, currentUser.id, Token)</text><polygon fill="#181818" points="1037.5,301.3594,1047.5,305.3594,1037.5,309.3594,1041.5,305.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="921.5" x2="1043.5" y1="305.3594" y2="305.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="928.5" y="300.2935">GET(/api/floor/:id)</text><polygon fill="#181818" points="932.5,330.4922,922.5,334.4922,932.5,338.4922,928.5,334.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="926.5" x2="1053.5" y1="334.4922" y2="334.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="28" x="938.5" y="329.4263">floor</text><polygon fill="#181818" points="1293.5,359.625,1303.5,363.625,1293.5,367.625,1297.5,363.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="921.5" x2="1299.5" y1="363.625" y2="363.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="262" x="928.5" y="358.5591">ToSurveillanceDomain(task, userId, floor)</text><polygon fill="#181818" points="932.5,388.7578,922.5,392.7578,932.5,396.7578,928.5,392.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="926.5" x2="1309.5" y1="392.7578" y2="392.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="938.5" y="387.6919">SurveillanceTask</text><polygon fill="#181818" points="1192,417.8906,1202,421.8906,1192,425.8906,1196,421.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="921.5" x2="1198" y1="421.8906" y2="421.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="928.5" y="416.8247">AddAsync(SurveillanceTask)</text><polygon fill="#181818" points="932.5,447.0234,922.5,451.0234,932.5,455.0234,928.5,451.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="926.5" x2="1208" y1="451.0234" y2="451.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="938.5" y="445.9575">Task</text><polygon fill="#181818" points="1293.5,476.1563,1303.5,480.1563,1293.5,484.1563,1297.5,480.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="921.5" x2="1299.5" y1="480.1563" y2="480.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="928.5" y="475.0903">toDTO(Task)</text><polygon fill="#181818" points="932.5,505.2891,922.5,509.2891,932.5,513.2891,928.5,509.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="926.5" x2="1309.5" y1="509.2891" y2="509.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="938.5" y="504.2231">TaskDTO</text><polygon fill="#181818" points="552.5,534.4219,542.5,538.4219,552.5,542.4219,548.5,538.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="546.5" x2="915.5" y1="538.4219" y2="538.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="558.5" y="533.356">TaskDTO</text><polygon fill="#181818" points="284.5,563.5547,274.5,567.5547,284.5,571.5547,280.5,567.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="278.5" x2="535.5" y1="567.5547" y2="567.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="290.5" y="562.4888">status code 201</text><polygon fill="#181818" points="56.5,592.6875,46.5,596.6875,56.5,600.6875,52.5,596.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="50.5" x2="267.5" y1="596.6875" y2="596.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="62.5" y="591.6216">success</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1370" y1="605.6875" y2="605.6875"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="103" x="15" y="615.8979">[pickupdelivery]</text><polygon fill="#181818" points="251.5,636.625,261.5,640.625,251.5,644.625,255.5,640.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="45.5" x2="257.5" y1="640.625" y2="640.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="52.5" y="635.5591">POST(/api/tasks/pickupdelivery)</text><line style="stroke:#181818;stroke-width:1.0;" x1="273.5" x2="315.5" y1="669.7578" y2="669.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="315.5" x2="315.5" y1="669.7578" y2="682.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="274.5" x2="315.5" y1="682.7578" y2="682.7578"/><polygon fill="#181818" points="284.5,678.7578,274.5,682.7578,284.5,686.7578,280.5,682.7578" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="280.5" y="664.6919">auth middleware</text><polygon fill="#181818" points="519.5,707.8906,529.5,711.8906,519.5,715.8906,523.5,711.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="273.5" x2="525.5" y1="711.8906" y2="711.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="280.5" y="706.8247">CreatePickupDeliveryTaskAsync(task)</text><line style="stroke:#181818;stroke-width:1.0;" x1="541.5" x2="583.5" y1="741.0234" y2="741.0234"/><line style="stroke:#181818;stroke-width:1.0;" x1="583.5" x2="583.5" y1="741.0234" y2="754.0234"/><line style="stroke:#181818;stroke-width:1.0;" x1="542.5" x2="583.5" y1="754.0234" y2="754.0234"/><polygon fill="#181818" points="552.5,750.0234,542.5,754.0234,552.5,758.0234,548.5,754.0234" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="548.5" y="735.9575">permissions middleware</text><line style="stroke:#181818;stroke-width:1.0;" x1="541.5" x2="583.5" y1="783.1563" y2="783.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="583.5" x2="583.5" y1="783.1563" y2="796.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="542.5" x2="583.5" y1="796.1563" y2="796.1563"/><polygon fill="#181818" points="552.5,792.1563,542.5,796.1563,552.5,800.1563,548.5,796.1563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="548.5" y="778.0903">get current user</text><polygon fill="#181818" points="899.5,821.2891,909.5,825.2891,899.5,829.2891,903.5,825.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="541.5" x2="905.5" y1="825.2891" y2="825.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320" x="548.5" y="820.2231">AddPickupDeliveryTaskAsync(task, currentUser.id)</text><polygon fill="#181818" points="1110,850.4219,1120,854.4219,1110,858.4219,1114,854.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="921.5" x2="1116" y1="854.4219" y2="854.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="928.5" y="849.356">GET(/findPath/)</text><polygon fill="#181818" points="932.5,879.5547,922.5,883.5547,932.5,887.5547,928.5,883.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="926.5" x2="1126" y1="883.5547" y2="883.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="938.5" y="878.4888">pathMovement</text><polygon fill="#181818" points="1293.5,908.6875,1303.5,912.6875,1293.5,916.6875,1297.5,912.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="921.5" x2="1299.5" y1="912.6875" y2="912.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="346" x="928.5" y="907.6216">ToPickupDeliveryDomain(task, userId, pathMovement)</text><polygon fill="#181818" points="932.5,937.8203,922.5,941.8203,932.5,945.8203,928.5,941.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="926.5" x2="1309.5" y1="941.8203" y2="941.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="938.5" y="936.7544">PickupDeliveryTask</text><polygon fill="#181818" points="1192,966.9531,1202,970.9531,1192,974.9531,1196,970.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="921.5" x2="1198" y1="970.9531" y2="970.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="928.5" y="965.8872">AddAsync(PickupDeliveryTask)</text><polygon fill="#181818" points="932.5,996.0859,922.5,1000.0859,932.5,1004.0859,928.5,1000.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="926.5" x2="1208" y1="1000.0859" y2="1000.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="938.5" y="995.02">Task</text><polygon fill="#181818" points="1293.5,1025.2188,1303.5,1029.2188,1293.5,1033.2188,1297.5,1029.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="921.5" x2="1299.5" y1="1029.2188" y2="1029.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="928.5" y="1024.1528">toDTO(Task)</text><polygon fill="#181818" points="932.5,1054.3516,922.5,1058.3516,932.5,1062.3516,928.5,1058.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="926.5" x2="1309.5" y1="1058.3516" y2="1058.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="938.5" y="1053.2856">TaskDTO</text><polygon fill="#181818" points="552.5,1083.4844,542.5,1087.4844,552.5,1091.4844,548.5,1087.4844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="546.5" x2="915.5" y1="1087.4844" y2="1087.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="558.5" y="1082.4185">TaskDTO</text><polygon fill="#181818" points="284.5,1112.6172,274.5,1116.6172,284.5,1120.6172,280.5,1116.6172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="278.5" x2="535.5" y1="1116.6172" y2="1116.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="290.5" y="1111.5513">status code 201</text><polygon fill="#181818" points="51.5,1141.75,41.5,1145.75,51.5,1149.75,47.5,1145.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="45.5" x2="267.5" y1="1145.75" y2="1145.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="57.5" y="1140.6841">success</text><!--MD5=[b985cf68bfaa80aba4c34ee5e79679db]
@startuml
participant SPA
participant "MPT API" as API
participant "TaskController" as Ctrl
participant "TaskService" as Srv
participant "MGI API" as API2
participant "MP API" as API3
participant "TaskRepo" as Repo
participant "TaskMapper" as Map

alt surveillance
    activate SPA
    SPA -> API: POST(/api/tasks/surveillance)
    activate API

    API -> API: auth middleware 
    API -> Ctrl: CreateSurveillanceTaskAsync(task)
    activate Ctrl

    Ctrl -> Ctrl: permissions middleware 
    Ctrl -> Ctrl: get current user
    Ctrl -> Srv: AddSurveillanceTaskAsync(task, currentUser.id, Token)
    activate Srv

    Srv -> API2: GET(/api/floor/:id)
    activate API2
    API2 - -> Srv: floor
    deactivate API2

    Srv -> Map: ToSurveillanceDomain(task, userId, floor)
    activate Map
    Map - -> Srv: SurveillanceTask
    deactivate Map

    Srv -> Repo: AddAsync(SurveillanceTask)
    activate Repo
    Repo - -> Srv: Task
    deactivate Repo

    Srv -> Map: toDTO(Task)
    activate Map
    Map - -> Srv: TaskDTO
    deactivate Map

    Srv - -> Ctrl: TaskDTO
    deactivate Srv

    Ctrl - -> API: status code 201
    deactivate Ctrl

    API - -> SPA: success
    deactivate API

else pickupdelivery

    SPA -> API: POST(/api/tasks/pickupdelivery)
    activate API

    API -> API: auth middleware 
    API -> Ctrl: CreatePickupDeliveryTaskAsync(task)
    activate Ctrl

    Ctrl -> Ctrl: permissions middleware 
    Ctrl -> Ctrl: get current user
    Ctrl -> Srv: AddPickupDeliveryTaskAsync(task, currentUser.id)
    activate Srv

    Srv -> API3: GET(/findPath/)
    activate API3
    API3 - -> Srv: pathMovement
    deactivate API3

    Srv -> Map: ToPickupDeliveryDomain(task, userId, pathMovement)
    activate Map
    Map - -> Srv: PickupDeliveryTask
    deactivate Map

    Srv -> Repo: AddAsync(PickupDeliveryTask)
    activate Repo
    Repo - -> Srv: Task
    deactivate Repo

    Srv -> Map: toDTO(Task)
    activate Map
    Map - -> Srv: TaskDTO
    deactivate Map

    Srv - -> Ctrl: TaskDTO
    deactivate Srv

    Ctrl - -> API: status code 201
    deactivate Ctrl

    API - -> SPA: success
    deactivate API
    deactivate SPA

end

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 WEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>