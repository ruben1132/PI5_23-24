<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="467px" preserveAspectRatio="none" style="width:1333px;height:467px;background:#FFFFFF;" version="1.1" viewBox="0 0 1333 467" width="1333px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="376.5938" style="stroke:#181818;stroke-width:1.0;" width="10" x="20.5" y="46.2969"/><rect fill="#FFFFFF" height="317.3281" style="stroke:#181818;stroke-width:1.0;" width="10" x="167.5" y="67.4297"/><rect fill="#FFFFFF" height="246.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="304.5" y="138.6953"/><rect fill="#FFFFFF" height="145.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="482.5" y="209.9609"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="674.5" y="239.0938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="869" y="268.2266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="25" x2="25" y1="36.2969" y2="431.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="172" x2="172" y1="36.2969" y2="431.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="309.5" x2="309.5" y1="36.2969" y2="431.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="487" x2="487" y1="36.2969" y2="431.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="578" x2="578" y1="36.2969" y2="431.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="679.5" x2="679.5" y1="36.2969" y2="431.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="772.5" x2="772.5" y1="36.2969" y2="431.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="873.5" x2="873.5" y1="36.2969" y2="431.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="982.5" x2="982.5" y1="36.2969" y2="431.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1105.5" x2="1105.5" y1="36.2969" y2="431.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1253.5" x2="1253.5" y1="36.2969" y2="431.8906"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="12" y="24.9951">SPA</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41" x="5" y="430.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="12" y="450.8857">SPA</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="138" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="145" y="24.9951">MPT API</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="138" y="430.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="145" y="450.8857">MPT API</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="252.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="259.5" y="24.9951">TaskController</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="252.5" y="430.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="259.5" y="450.8857">TaskController</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="439" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="446" y="24.9951">TaskService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="439" y="430.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="446" y="450.8857">TaskService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="546" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="553" y="24.9951">MGI API</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="546" y="430.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="553" y="450.8857">MGI API</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="637.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="644.5" y="24.9951">TaskRepo</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="637.5" y="430.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="644.5" y="450.8857">TaskRepo</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="731.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="738.5" y="24.9951">UserRepo</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="731.5" y="430.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="738.5" y="450.8857">UserRepo</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="824.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="831.5" y="24.9951">TaskMapper</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="824.5" y="430.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="831.5" y="450.8857">TaskMapper</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="933.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="940.5" y="24.9951">UserMapper</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="933.5" y="430.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="940.5" y="450.8857">UserMapper</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129" x="1041.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="1048.5" y="24.9951">SurveillanceTask</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129" x="1041.5" y="430.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="1048.5" y="450.8857">SurveillanceTask</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147" x="1180.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="1187.5" y="24.9951">PickupDeliveryTask</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147" x="1180.5" y="430.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="1187.5" y="450.8857">PickupDeliveryTask</text><rect fill="#FFFFFF" height="376.5938" style="stroke:#181818;stroke-width:1.0;" width="10" x="20.5" y="46.2969"/><rect fill="#FFFFFF" height="317.3281" style="stroke:#181818;stroke-width:1.0;" width="10" x="167.5" y="67.4297"/><rect fill="#FFFFFF" height="246.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="304.5" y="138.6953"/><rect fill="#FFFFFF" height="145.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="482.5" y="209.9609"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="674.5" y="239.0938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="869" y="268.2266"/><polygon fill="#181818" points="155.5,63.4297,165.5,67.4297,155.5,71.4297,159.5,67.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="30.5" x2="161.5" y1="67.4297" y2="67.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="37.5" y="62.3638">PATCH(/api/tasks/)</text><line style="stroke:#181818;stroke-width:1.0;" x1="177.5" x2="219.5" y1="96.5625" y2="96.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="219.5" x2="219.5" y1="96.5625" y2="109.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="178.5" x2="219.5" y1="109.5625" y2="109.5625"/><polygon fill="#181818" points="188.5,105.5625,178.5,109.5625,188.5,113.5625,184.5,109.5625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="184.5" y="91.4966">auth middleware</text><polygon fill="#181818" points="292.5,134.6953,302.5,138.6953,292.5,142.6953,296.5,138.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="177.5" x2="298.5" y1="138.6953" y2="138.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="184.5" y="133.6294">PATCH</text><line style="stroke:#181818;stroke-width:1.0;" x1="314.5" x2="356.5" y1="167.8281" y2="167.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="356.5" x2="356.5" y1="167.8281" y2="180.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="315.5" x2="356.5" y1="180.8281" y2="180.8281"/><polygon fill="#181818" points="325.5,176.8281,315.5,180.8281,325.5,184.8281,321.5,180.8281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="321.5" y="162.7622">permissions middleware</text><polygon fill="#181818" points="470.5,205.9609,480.5,209.9609,470.5,213.9609,474.5,209.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="314.5" x2="476.5" y1="209.9609" y2="209.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="321.5" y="204.895">ApproveReject</text><polygon fill="#181818" points="662.5,235.0938,672.5,239.0938,662.5,243.0938,666.5,239.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="492.5" x2="668.5" y1="239.0938" y2="239.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="499.5" y="234.0278">update aprove/reject field</text><polygon fill="#181818" points="857,264.2266,867,268.2266,857,272.2266,861,268.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="684.5" x2="863" y1="268.2266" y2="268.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="691.5" y="263.1606">toDto</text><polygon fill="#181818" points="695.5,293.3594,685.5,297.3594,695.5,301.3594,691.5,297.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="689.5" x2="873" y1="297.3594" y2="297.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="701.5" y="292.2935">TaskDto</text><polygon fill="#181818" points="503.5,322.4922,493.5,326.4922,503.5,330.4922,499.5,326.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="497.5" x2="678.5" y1="326.4922" y2="326.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="509.5" y="321.4263">TaskDto</text><polygon fill="#181818" points="325.5,351.625,315.5,355.625,325.5,359.625,321.5,355.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="319.5" x2="486.5" y1="355.625" y2="355.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="331.5" y="350.5591">taskDto</text><polygon fill="#181818" points="183.5,380.7578,173.5,384.7578,183.5,388.7578,179.5,384.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="177.5" x2="308.5" y1="384.7578" y2="384.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="189.5" y="379.6919">status code 200</text><polygon fill="#181818" points="41.5,409.8906,31.5,413.8906,41.5,417.8906,37.5,413.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="35.5" x2="171.5" y1="413.8906" y2="413.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="47.5" y="408.8247">success</text><!--MD5=[08b6d409ab9e89ce0ba7fea3c22c84b7]
@startuml
participant SPA
participant "MPT API" as API
participant "TaskController" as Ctrl
participant "TaskService" as Srv
participant "MGI API" as API2

participant "TaskRepo" as Repo
participant "UserRepo" as ur
participant "TaskMapper" as Map
participant "UserMapper" as um
participant "SurveillanceTask" as SurveillanceTask
participant "PickupDeliveryTask" as PickupDeliveryTask

activate SPA


SPA -> API: PATCH(/api/tasks/)
activate API
API -> API: auth middleware 

API -> Ctrl: PATCH
activate Ctrl
Ctrl -> Ctrl: permissions middleware 

Ctrl -> Srv: ApproveReject
activate Srv
Srv -> Repo: update aprove/reject field

activate Repo
Repo - -> Map: toDto
activate Map
Map -> Repo: TaskDto
deactivate Map
Repo - -> Srv: TaskDto
deactivate Repo

    
Srv - -> Ctrl: taskDto
deactivate Srv

Ctrl - -> API: status code 200

deactivate Ctrl
deactivate API

API - -> SPA: success

deactivate API







@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 WEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>